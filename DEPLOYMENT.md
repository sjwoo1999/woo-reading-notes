# ë°°í¬ ê°€ì´ë“œ (Deployment Guide)

## ë‹¨ê³„ë³„ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 1ï¸âƒ£ Pre-Deployment ì¤€ë¹„ (Development â†’ Staging)

#### í™˜ê²½ ì„¤ì •
- [ ] `.env.local` íŒŒì¼ ê²€í†  (ë¯¼ê°í•œ ì •ë³´ í™•ì¸)
- [ ] `.env.production` íŒŒì¼ ìƒì„±
  ```
  NEXT_PUBLIC_SUPABASE_URL=https://[project].supabase.co
  NEXT_PUBLIC_SUPABASE_ANON_KEY=[anon-key]
  ```
- [ ] ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ

#### ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦
- [ ] Supabase í”„ë¡œë•ì…˜ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
- [ ] RLS (Row Level Security) ì •ì±… ê²€í† 
  - [ ] `notes` í…Œì´ë¸” RLS í™œì„±í™”
  - [ ] `links` í…Œì´ë¸” RLS í™œì„±í™”
  - [ ] `reminders` í…Œì´ë¸” RLS í™œì„±í™”
  - [ ] `profiles` í…Œì´ë¸” RLS í™œì„±í™”
- [ ] ì¸ë±ìŠ¤ ìƒì„± í™•ì¸
  - [ ] `idx_notes_user_type`
  - [ ] `idx_notes_user_created`
  - [ ] `idx_notes_tags`
  - [ ] `idx_reminders_scheduled`
  - [ ] `idx_links_source`, `idx_links_target`

#### ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
- [ ] `npm run lint` - 0 errors
- [ ] `npm run type-check` - 0 errors
- [ ] `npm run build` - ì„±ê³µ
- [ ] ëª¨ë“  ë¼ìš°íŠ¸ í…ŒìŠ¤íŠ¸
  - [ ] `/` (í™ˆ)
  - [ ] `/auth` (ë¡œê·¸ì¸)
  - [ ] `/notes` (ë…¸íŠ¸ ëª©ë¡)
  - [ ] `/notes/new` (ìƒˆ ë…¸íŠ¸ ì‘ì„±)
  - [ ] `/notes/[id]` (ë…¸íŠ¸ ìƒì„¸)
  - [ ] `/notes/[id]/edit` (ë…¸íŠ¸ ìˆ˜ì •)
  - [ ] `/search` (ê²€ìƒ‰)
  - [ ] `/graph` (ê·¸ë˜í”„)
  - [ ] `/review` (ë³µìŠµ)

#### API ì—”ë“œí¬ì¸íŠ¸ ê²€ì¦
- [ ] `GET /api/notes` - ì¸ì¦ & ë°ì´í„° ë°˜í™˜
- [ ] `POST /api/notes` - ë…¸íŠ¸ ìƒì„±
- [ ] `GET /api/notes/[id]` - ë…¸íŠ¸ ìƒì„¸
- [ ] `PATCH /api/notes/[id]` - ë…¸íŠ¸ ìˆ˜ì •
- [ ] `DELETE /api/notes/[id]` - ë…¸íŠ¸ ì‚­ì œ
- [ ] `GET /api/notes/search` - ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] `GET /api/notes/autocomplete` - ìë™ì™„ì„±
- [ ] `GET /api/reminders` - ë³µìŠµ ëª©ë¡
- [ ] `POST /api/reminders` - ë³µìŠµ ìƒì„±
- [ ] `PATCH /api/reminders/[id]` - ë³µìŠµ ìƒíƒœ ë³€ê²½
- [ ] `DELETE /api/reminders/[id]` - ë³µìŠµ ì‚­ì œ
- [ ] `GET /api/graph` - ê·¸ë˜í”„ ë°ì´í„°
- [ ] `GET /api/links` - ë§í¬ ëª©ë¡
- [ ] `POST /api/links` - ë§í¬ ìƒì„±

---

### 2ï¸âƒ£ Staging ë°°í¬ (í…ŒìŠ¤íŠ¸)

#### ë¹Œë“œ ë° ë°°í¬
```bash
# í”„ë¡œë•ì…˜ ë¹Œë“œ ìƒì„±
npm run build

# ë¹Œë“œ ê²°ê³¼ í™•ì¸
npm run start  # ë¡œì»¬ì—ì„œ í”„ë¡œë•ì…˜ ë¹Œë“œ í…ŒìŠ¤íŠ¸
```

#### Staging ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
  ```sql
  -- ê¸°ì¡´ ë°ì´í„° ë°±ì—…
  CREATE TABLE notes_backup AS SELECT * FROM notes;
  CREATE TABLE links_backup AS SELECT * FROM links;
  CREATE TABLE reminders_backup AS SELECT * FROM reminders;
  ```
- [ ] ìŠ¤í‚¤ë§ˆ ê²€ì¦
- [ ] ë°ì´í„° ë¬´ê²°ì„± í™•ì¸

#### Staging í™˜ê²½ í…ŒìŠ¤íŠ¸
- [ ] ëª¨ë“  UI í˜ì´ì§€ í…ŒìŠ¤íŠ¸
- [ ] ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- [ ] ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ íë¦„
- [ ] ë…¸íŠ¸ CRUD ì‘ì—…
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] ê·¸ë˜í”„ ì‹œê°í™”
- [ ] ë³µìŠµ ì‹œìŠ¤í…œ

---

### 3ï¸âƒ£ ì„±ëŠ¥ ìµœì í™”

#### ë²ˆë“¤ í¬ê¸° í™•ì¸
```bash
npm run build
# ë²ˆë“¤ í¬ê¸° í™•ì¸ (First Load JS < 250KB)
```

#### ì´ë¯¸ì§€ ìµœì í™”
- [ ] ëª¨ë“  ì´ë¯¸ì§€ WebP í˜•ì‹ìœ¼ë¡œ ìµœì í™”
- [ ] ì´ë¯¸ì§€ lazy loading ì ìš©

#### ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”
- [ ] ë¶ˆí•„ìš”í•œ ì—´ ì„ íƒ ì œê±°
- [ ] N+1 ì¿¼ë¦¬ ë¬¸ì œ í™•ì¸
- [ ] ì¸ë±ìŠ¤ í™œìš© í™•ì¸

---

### 4ï¸âƒ£ ë³´ì•ˆ ê²€ì‚¬

#### í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ
- [ ] `.env` íŒŒì¼ì´ `.gitignore`ì— í¬í•¨ë¨
- [ ] ë¯¼ê°í•œ ì •ë³´ê°€ ì½”ë“œì— í•˜ë“œì½”ë”©ë˜ì§€ ì•ŠìŒ
- [ ] ëª¨ë“  ë¹„ë°€ í‚¤ê°€ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •ë¨

#### ì¸ì¦ ë° ê¶Œí•œ ê²€ì‚¬
- [ ] Bearer token ê²€ì¦
- [ ] RLS ì •ì±… ì œëŒ€ë¡œ ì‘ë™
- [ ] ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- [ ] ê´€ë¦¬ì ê¸°ëŠ¥ í™•ì¸ (ìˆëŠ” ê²½ìš°)

#### API ë³´ì•ˆ
- [ ] HTTPS ê°•ì œ
- [ ] CORS ì„¤ì • ê²€í† 
- [ ] Rate limiting ê³ ë ¤
- [ ] SQL injection ë°©ì§€ (Supabase RLS ì‚¬ìš©)

#### ì…ë ¥ ê²€ì¦
- [ ] ëª¨ë“  ì‚¬ìš©ì ì…ë ¥ ê²€ì¦
- [ ] XSS ê³µê²© ë°©ì§€
- [ ] CSRF í† í° ì‚¬ìš© (í•„ìš”í•œ ê²½ìš°)

---

### 5ï¸âƒ£ ëª¨ë‹ˆí„°ë§ ì„¤ì •

#### ë¡œê¹…
- [ ] ì„œë²„ ì—ëŸ¬ ë¡œê¹…
- [ ] API í˜¸ì¶œ ë¡œê¹…
- [ ] ì‚¬ìš©ì í™œë™ ë¡œê¹… (í•„ìš”í•œ ê²½ìš°)

#### ì˜¤ë¥˜ ì¶”ì 
- [ ] Sentry ë˜ëŠ” ìœ ì‚¬ ì„œë¹„ìŠ¤ ì„¤ì • (ì„ íƒì‚¬í•­)
- [ ] í”„ë¡œë•ì…˜ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§

#### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] Core Web Vitals ëª¨ë‹ˆí„°ë§
- [ ] API ì‘ë‹µ ì‹œê°„ ì¶”ì 
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì„±ëŠ¥ í™•ì¸

---

### 6ï¸âƒ£ í”„ë¡œë•ì…˜ ë°°í¬

#### ë°°í¬ ì „ ìµœì¢… í™•ì¸
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì™„ë£Œ
- [ ] ë¡¤ë°± ê³„íš ì¤€ë¹„
- [ ] ë°°í¬ ì‹œê°„ ê²°ì • (íŠ¸ë˜í”½ ë‚®ì€ ì‹œê°„)

#### ë°°í¬ ì‹¤í–‰
1. Vercel / Netlify / ê¸°íƒ€ ë°°í¬ ì„œë¹„ìŠ¤ì— í‘¸ì‹œ
2. í”„ë¡œë•ì…˜ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
3. í”„ë¡œë•ì…˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
4. ë°°í¬ ì™„ë£Œ ëŒ€ê¸°

#### ë°°í¬ í›„ ê²€ì¦
- [ ] í”„ë¡œë•ì…˜ ì‚¬ì´íŠ¸ ì ‘ì† ê°€ëŠ¥
- [ ] ëª¨ë“  í˜ì´ì§€ ë¡œë“œ í™•ì¸
- [ ] API ì‘ë‹µ í™•ì¸
- [ ] ì—ëŸ¬ ë¡œê·¸ í™•ì¸
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘

---

## ê¸´ê¸‰ ë¡¤ë°± ê³„íš

ë§Œì•½ í”„ë¡œë•ì…˜ ë°°í¬ ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ë©´:

1. ì´ì „ ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ë°°í¬
   ```bash
   # ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°
   git revert [new-commit-hash]
   git push origin main
   ```

2. ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬ (í•„ìš”í•œ ê²½ìš°)
   ```sql
   -- ë°±ì—…ì—ì„œ ë³µêµ¬
   DROP TABLE notes;
   ALTER TABLE notes_backup RENAME TO notes;
   ```

3. ì‚¬ìš©ìì—ê²Œ ìƒí™© ì „ë‹¬
4. ê·¼ë³¸ ì›ì¸ ë¶„ì„ ë° ìˆ˜ì •

---

## ë²„ì „ ê´€ë¦¬

### ë²„ì „ ë²ˆí˜¸ í˜•ì‹: MAJOR.MINOR.PATCH

**MAJOR**: ì£¼ìš” ê¸°ëŠ¥ ì¶”ê°€ (1.0.0 â†’ 2.0.0)
**MINOR**: ìƒˆë¡œìš´ ê¸°ëŠ¥ (1.0.0 â†’ 1.1.0)
**PATCH**: ë²„ê·¸ ìˆ˜ì • (1.0.0 â†’ 1.0.1)

### í˜„ì¬ ë²„ì „: 0.6.0 (Week 6 ì™„ë£Œ)
- âœ… Week 1-2: ë°±ì—”ë“œ API (0.1.0)
- âœ… Week 3: ë…¸íŠ¸ UI & Wiki ë§í¬ (0.2.0)
- âœ… Week 4: ê·¸ë˜í”„ ì‹œê°í™” (0.4.0)
- âœ… Week 5: ê²€ìƒ‰ ê¸°ëŠ¥ (0.5.0)
- âœ… Week 6: SRS ë³µìŠµ ì‹œìŠ¤í…œ (0.6.0)
- ğŸš€ Week 7-8: ë°°í¬ â†’ 1.0.0 (ì •ì‹ ì¶œì‹œ)

---

## ë°°í¬ í›„ ìš´ì˜

### ì •ê¸°ì ì¸ ìœ ì§€ë³´ìˆ˜
- [ ] ì£¼ 1íšŒ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
- [ ] ì›” 1íšŒ ë³´ì•ˆ ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] ì›” 1íšŒ ì„±ëŠ¥ ë¦¬ë·°
- [ ] ë¶„ê¸° 1íšŒ ê¸°ëŠ¥ ì¶”ê°€ ê³„íš

### ì‚¬ìš©ì ì§€ì›
- [ ] ë²„ê·¸ ë¦¬í¬íŒ… ì±„ë„ ìš´ì˜
- [ ] í”¼ë“œë°± ìˆ˜ì§‘ ë° ë¶„ì„
- [ ] ì •ê¸° ì—…ë°ì´íŠ¸ ë°°í¬

---

## ì°¸ê³  ì‚¬í•­

### ë°°í¬ ì‹œê°„ (ì˜ˆìƒ)
- ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸: 30ë¶„
- ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜: 10ë¶„
- ë°°í¬: 5-15ë¶„
- ë°°í¬ í›„ ê²€ì¦: 15ë¶„
- **ì´ ì†Œìš” ì‹œê°„: ì•½ 1-2ì‹œê°„**

### í•„ìš” ê¶Œí•œ
- GitHub ì €ì¥ì†Œ í‘¸ì‹œ ê¶Œí•œ
- Supabase í”„ë¡œë•ì…˜ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ê¶Œí•œ
- ë°°í¬ ì„œë¹„ìŠ¤ (Vercel ë“±) ê´€ë¦¬ ê¶Œí•œ

---

